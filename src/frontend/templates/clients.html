{% extends "base.html" %}

{% block content %}
<div class="container">
    <h1 class="mb-4">üìã –ö–ª–∏–µ–Ω—Ç—ã</h1>
    
    <div class="card">
        <div class="card-header">
            <h5 class="mb-0">–°–ø–∏—Å–æ–∫ –∫–ª–∏–µ–Ω—Ç–æ–≤ (—Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ)</h5>
        </div>
        <div class="card-body">
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>–ò–º—è</th>
                        <th>Email</th>
                        <th>–ö–æ–º–ø–∞–Ω–∏—è</th>
                        <th>–°–µ–≥–º–µ–Ω—Ç</th>
                    </tr>
                </thead>
                <tbody>
                    {% for client in clients %}
                    <tr>
                        <td>{{ client.id }}</td>
                        <td>{{ client.first_name }} {{ client.last_name }}</td>
                        <td>{{ client.email }}</td>
                        <td>{{ client.company }}</td>
                        <td>
                            <span class="badge {% if client.segment == 'VIP' %}bg-danger{% elif client.segment == '–ª–æ—è–ª—å–Ω—ã–π' %}bg-success{% else %}bg-primary{% endif %}">
                                {{ client.segment }}
                            </span>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
    
    <div class="mt-4">
        <a href="/" class="btn btn-secondary">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
        <button class="btn btn-primary" onclick="fetchClients()">üîÑ –û–±–Ω–æ–≤–∏—Ç—å —á–µ—Ä–µ–∑ API</button>
    </div>
</div>

<script>
async function fetchClients() {
    const response = await fetch('/api/clients');
    const data = await response.json();
    alert(`–ü–æ–ª—É—á–µ–Ω–æ ${data.clients.length} –∫–ª–∏–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ API`);
    console.log(data);
}
</script>
{% endblock %}